'use strict'

const test = require('tape')
const styler = require('../vim-styler.js')
const fs = require('fs')

const testStr = `"
" scheme s v2.1.0
" description d
" url u
" author: author a
" license: MIT
" background: dark
"
" This file was generated by vim-styler
" https://github.com/jacoborus/vim-styler

hi hitest guifg=#bbddff ctermfg=153 guibg=#ffffff ctermbg=15 gui=NONE cterm=NONE
hi other guifg=#ff0000 ctermfg=9 guibg=NONE ctermbg=NONE gui=bold,underline,italic cterm=bold,underline,italic\n`

test('styler', t => {
  styler('./test/sample.yaml')
  const str = fs.readFileSync('./sample.vim', 'utf-8')
  t.is(str, testStr)
  fs.unlink('./sample.vim', () => {
    t.end()
  })
})
